<!DOCTYPE html>
<html>
<head>
  <title>10x10 ì¹¸ ëˆ„ì  ê²Œì„</title>
  <!-- Google Fonts ì ìš© -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,500,600&display=swap" rel="stylesheet">
  <style>
    /* ì „ì²´ ìŠ¤íƒ€ì¼ */
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #e0eafc, #cfdef3);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 20px;
      margin: 0;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      /* ìŠ¤í¬ë¡¤ ë°©ì§€ */
      overflow: hidden;
    }

    h2 {
      font-size: 26px;
      color: #2c3e50;
      margin-bottom: 15px;
      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    p {
      margin-bottom: 10px;
      text-align: center;
      font-size: 14px;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    #info-bar {
      text-align: center;
      margin-bottom: 15px;
      font-size: 16px;
      font-weight: bold;
      background: rgba(255, 255, 255, 0.8);
      padding: 10px 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    /* ë ˆë²¨ ì •ë³´ í‘œì‹œ UI */
    #level-info {
      text-align: center;
      margin-bottom: 10px;
      font-size: 14px;
      font-weight: bold;
      color: #555;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    /* í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
    #tables-container {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      margin-bottom: 20px;
      width: fit-content;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    /* í™•ë¥  í‘œ ìŠ¤íƒ€ì¼ */
    #probabilityTable {
      border-collapse: collapse;
      margin-left: 20px;
      width: auto;
      display: inline-block;
      vertical-align: top;
      font-size: 14px;
    }

    #probabilityTable caption {
      caption-side: top;
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 14px;
      color: #555;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    #probabilityTable th,
    #probabilityTable td {
      padding: 8px 12px;
      border: 1px solid #ddd;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    /* ê²Œì„ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
    #gameTable {
      border-collapse: separate;
      border-spacing: 1px;
      margin-right: 0;
      display: inline-block;
      vertical-align: top;
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
    }

    th, td {
      text-align: center;
      font-size: 14px;
    }

    td {
      background-color: #f9f9f9; /* ì•½ê°„ ì–´ë‘ìš´ ë°°ê²½ìƒ‰ */
      transition: background-color 0.15s ease-in-out;
      border: 2px solid #bbb;
    }

    td:focus {
      outline: 2px solid #007bff;
      box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
    }

    #gameTable td {
      cursor: pointer;
      /* ì¹¸ ê°€ë¡œì„¸ë¡œ í¬ê¸° ê³ ì • (ì •ì‚¬ê°í˜•) */
      width: 40px;
      height: 40px;
      font-size: 18px;
      border-radius: 6px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    #gameTable td:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    /* clicked í´ë˜ìŠ¤: í´ë¦­ ì‹œ ì‹œê°ì  í”¼ë“œë°± (ì•½ê°„ íˆ¬ëª…í•´ì§ + ì‚´ì§ ì¶•ì†Œ) */
    .clicked {
      opacity: 0.7;
      transform: scale(0.95);
      transition: transform 0.1s ease-in-out, opacity 0.1s ease-in-out;
    }

    /* ê²°ê³¼ë³„ ìŠ¤íƒ€ì¼ */
    .ê½ {
      background-color: #f8f9fa;
      color: #6c757d;
    }

    .minus-500 {
      background-color: #ffebee;
      color: #d32f2f;
    }

    .minus-1000 {
      background-color: #ffcdd2;
      color: #c62828;
    }

    .minus-5000 {
      background-color: #ef9a9a;
      color: #b71c1c;
      font-weight: bold;
    }

    .plus-500 {
      background-color: #e8f5e9;
      color: #388e3c;
    }

    .plus-1000 {
      background-color: #c8e6c9;
      color: #2e7d32;
    }

    .plus-5000 {
      background-color: #a5d6a7;
      color: #1b5e20;
      font-weight: bold;
    }

    .plus-10000 {
      background-color: #80cbc4;
      color: #004d40;
      font-weight: bolder;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
    }

    #button-group {
      margin-top: 20px;
      text-align: center;
    }

    #buy-chance-btn, #give-up-btn {
      padding: 10px 20px;
      cursor: pointer;
      margin: 0 10px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      color: #fff;
      background: linear-gradient(45deg, #3498db, #2980b9);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      transition: background 0.3s ease;
    }

    #buy-chance-btn:hover, #give-up-btn:hover {
      background: linear-gradient(45deg, #2980b9, #3498db);
    }

    #buy-chance-btn:disabled, #give-up-btn:disabled {
      background: #6c757d;
      cursor: default;
    }

    /* íŠœí† ë¦¬ì–¼ ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
    #tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.85);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #tutorial-content {
      background-color: white;
      color: black;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
      text-align: left;
      max-width: 80%;
      max-height: 80%;
      overflow-y: auto;
      position: relative;
    }

    #tutorial-close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      color: #777;
      cursor: pointer;
      background: none;
      border: none;
    }

    #tutorial-close-btn:hover {
      color: #333;
    }

    /* ëª¨ë°”ì¼ í™˜ê²½ ìŠ¤íƒ€ì¼ */
    @media screen and (max-width: 768px) {
      body {
        padding-top: 10px;
      }

      h2 {
        font-size: 22px;
      }

      p {
        font-size: 12px;
      }

      #info-bar, #level-info {
        font-size: 12px;
        margin-bottom: 10px;
      }

      #tables-container {
        flex-direction: column;
        align-items: center;
        width: 95%;
        padding: 10px;
        margin-bottom: 10px;
      }

      #probabilityTable {
        margin-left: 0;
        margin-top: 15px;
        width: 95%;
        display: block;
      }

      #gameTable {
        margin-right: 0;
        width: 95%;
        display: block;
      }

      #gameTable td {
        width: calc(95vw / 10 - 12px);
        height: calc(95vw / 10 - 12px);
        font-size: 16px;
      }

      #button-group {
        margin-top: 10px;
      }

      #buy-chance-btn, #give-up-btn {
        padding: 6px 12px;
        font-size: 12px;
        margin: 0 5px;
      }
    }

    /* í„°ì¹˜ ì¥ì¹˜ (pointer: coarse) í™˜ê²½: í„°ì¹˜ ì‹œ hover íš¨ê³¼ ì œê±° */
    @media (pointer: coarse) {
      #gameTable td:hover {
        transform: none;
        box-shadow: none;
      }
    }
  </style>
</head>
<body role="application" aria-label="10x10 ì¹¸ ëˆ„ì  ê²Œì„" oncontextmenu="return false">
  <!-- íŠœí† ë¦¬ì–¼ ì˜¤ë²„ë ˆì´ -->
  <div id="tutorial-overlay">
    <div id="tutorial-content">
      <button id="tutorial-close-btn" aria-label="íŠœí† ë¦¬ì–¼ ë‹«ê¸°">Ã—</button>
      <h2>10x10 ì¹¸ ëˆ„ì  ê²Œì„ íŠœí† ë¦¬ì–¼</h2>
      <p><strong>ê²Œì„ ë°©ë²•:</strong></p>
      <ol>
        <li>10x10 ì¹¸ í…Œì´ë¸”ì—ì„œ ì¹¸ì„ í´ë¦­í•˜ì—¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</li>
        <li>ê° ì¹¸ì—ëŠ” "ê½", "+500ì›", "-1000ì›" ë“± ë‹¤ì–‘í•œ ê²°ê³¼ê°€ ìˆ¨ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤.</li>
        <li>ê²°ê³¼ì— ë”°ë¼ ìê¸ˆì´ ë³€ë™ë˜ë©°, ê¸°íšŒê°€ ì†Œì§„ë©ë‹ˆë‹¤.</li>
        <li>ê¸°íšŒê°€ ëª¨ë‘ ì†Œì§„ë˜ë©´ ê²Œì„ ì˜¤ë²„!</li>
      </ol>
      <p><strong>ëª©í‘œ:</strong></p>
      <p>ìê¸ˆì„ ìµœëŒ€í•œ ë§ì´ ëˆ„ì í•´ë³´ì„¸ìš”! íŒŒì‚°í•˜ì§€ ì•Šê³  ì˜¤ë˜ ë²„í‹°ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.</p>
      <p><strong>íŒ:</strong></p>
      <ul>
        <li>ê¸°íšŒë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ê¸° ì „ì— "ê¸°íšŒ ì¶”ê°€" ë²„íŠ¼ì„ ëˆŒëŸ¬ ê¸°íšŒë¥¼ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (500ì› ì†Œëª¨)</li>
        <li>ì–¸ì œ ê¸°íšŒë¥¼ êµ¬ë§¤í•˜ê³ , ì–¸ì œ í¬ê¸°í• ì§€ ì „ëµì ìœ¼ë¡œ íŒë‹¨í•´ë³´ì„¸ìš”.</li>
        <li>ê²°ê³¼ í™•ë¥  í‘œë¥¼ ì°¸ê³ í•˜ì—¬ ê²Œì„ ì „ëµì„ ì„¸ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
      </ul>
      <p>ì¬ë¯¸ìˆê²Œ ì¦ê¸°ì„¸ìš”!</p>
    </div>
  </div>

  <h2>10x10 ì¹¸ ëˆ„ì  ê²Œì„</h2>

  <!-- ê²Œì„ ì •ë³´ ë° ë ˆë²¨ ì •ë³´ -->
  <div id="info-bar" role="region" aria-live="polite" aria-label="ê²Œì„ ì •ë³´">
    ê¸°íšŒ: <span id="chances" role="status" aria-live="assertive" aria-label="ë‚¨ì€ ê¸°íšŒ">10</span> íšŒ | ìê¸ˆ: <span id="balance" role="status" aria-live="assertive" aria-label="í˜„ì¬ ìê¸ˆ">0</span> ì›
  </div>

  <div id="level-info">
    ë ˆë²¨: <span id="level">1</span> | ê²½í—˜ì¹˜: <span id="experience">0</span> / <span id="experience-per-level">10000</span>
  </div>

  <p>ì¹¸ì„ í´ë¦­í•˜ê±°ë‚˜, í‚¤ë³´ë“œ íƒ­/ì—”í„° í‚¤ë¡œ ì¡°ì‘í•˜ì—¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>

  <!-- ê²Œì„ í…Œì´ë¸” ë° í™•ë¥  ì •ë³´ í…Œì´ë¸” -->
  <div id="tables-container">
    <table id="gameTable" role="grid" aria-label="ê²Œì„ í…Œì´ë¸”">
    </table>

    <table id="probabilityTable" role="table" aria-label="í™•ë¥  ì •ë³´ í…Œì´ë¸”">
      <caption>ê²°ê³¼ í™•ë¥  í‘œ</caption>
      <thead>
        <tr>
          <th>ê²°ê³¼</th>
          <th>í™•ë¥ </th>
        </tr>
      </thead>
      <tbody id="probabilityTableBody">
      </tbody>
    </table>
  </div>

  <!-- ë²„íŠ¼ ê·¸ë£¹ -->
  <div id="button-group">
    <button id="buy-chance-btn" role="button" aria-label="ê¸°íšŒ ì¶”ê°€ ë²„íŠ¼">ê¸°íšŒ ì¶”ê°€ (500ì›)</button>
    <button id="give-up-btn" role="button" aria-label="í¬ê¸°í•˜ê¸° ë²„íŠ¼">í¬ê¸°í•˜ê¸°</button>
  </div>

  <script>
    // [UX ê°œì„ ] í´ë¦­ ì‚¬ìš´ë“œ íš¨ê³¼
    const clickSound = new Audio('click_sound.mp3'); // âš ï¸ HTML íŒŒì¼ê³¼ ê°™ì€ í´ë”ì— 'click_sound.mp3' íŒŒì¼ì„ ë„£ì–´ì£¼ì„¸ìš”!

    // [ë³´ì•ˆ ê¸°ëŠ¥] ê°œë°œì ë„êµ¬ ê´€ë ¨ ì´ë²¤íŠ¸
    document.addEventListener('keydown', function(event) {
      if (
        event.key === 'F12' ||
        (event.ctrlKey && event.shiftKey && (event.key === 'I' || event.key === 'J')) ||
        (event.metaKey && event.shiftKey && event.key === 'I')
      ) {
        event.preventDefault();
        alert('âš ï¸ ê³µì •í•œ ê²Œì„ í”Œë ˆì´ë¥¼ ìœ„í•´ ê°œë°œì ë„êµ¬ ì‚¬ìš©ì„ ìì œí•´ì£¼ì„¸ìš”. âš ï¸');
        return false;
      }
    });

    function checkDevTool() {
      const startTime = performance.now();
      // ê°œë°œì ë„êµ¬ ê°ì§€ë¥¼ ìœ„í•œ ë””ë²„ê±° êµ¬ë¬¸ì€ ì œê±°í•˜ì˜€ìŠµë‹ˆë‹¤.
      const endTime = performance.now();
      const isDevToolOpen = (endTime - startTime) > 100;
      if (isDevToolOpen) {
        location.reload();
      }
    }
    setInterval(checkDevTool, 1000);

    document.addEventListener('copy', function(event) {
      event.preventDefault();
    });

    const outcomes = [
      { result: "ê½", probability: 0.1, amount: 0 },
      { result: "-500ì›", probability: 0.2, amount: -500 },
      { result: "-1000ì›", probability: 0.15, amount: -1000 },
      { result: "-5000ì›", probability: 0.1, amount: -5000 },
      { result: "500ì›", probability: 0.2, amount: 500 },
      { result: "1000ì›", probability: 0.15, amount: 1000 },
      { result: "5000ì›", probability: 0.09, amount: 5000 },
      { result: "10000ì›", probability: 0.01, amount: 10000 }
    ];

    let chances = 10;
    let balance = 0;
    let gameActive = true;
    let level = 1;
    let experience = 0;
    const experiencePerLevel = 10000;

    const chanceDisplay = document.getElementById("chances");
    const balanceDisplay = document.getElementById("balance");
    const levelDisplay = document.getElementById("level");
    const experienceDisplay = document.getElementById("experience");
    const experiencePerLevelDisplay = document.getElementById("experience-per-level");

    const buyChanceButton = document.getElementById("buy-chance-btn");
    const giveUpButton = document.getElementById("give-up-btn");
    const gameTable = document.getElementById("gameTable");
    const probabilityTableBody = document.getElementById("probabilityTableBody");
    const tableCells = [];

    function showTutorial() {
      document.getElementById('tutorial-overlay').style.display = 'flex';
    }

    function hideTutorial() {
      document.getElementById('tutorial-overlay').style.display = 'none';
    }

    function updateInfoBar() {
      chanceDisplay.textContent = chances;
      balanceDisplay.textContent = balance;
      updateLevelInfo();
    }

    function updateLevelInfo() {
      levelDisplay.textContent = level;
      experienceDisplay.textContent = experience;
      experiencePerLevelDisplay.textContent = experiencePerLevel;
    }

    function getRandomOutcome() {
      const rand = Math.random();
      let cumulativeProbability = 0;
      for (const outcome of outcomes) {
        cumulativeProbability += outcome.probability;
        if (rand < cumulativeProbability) {
          return outcome;
        }
      }
      return outcomes[0];
    }

    function disableGame() {
      gameActive = false;
      gameTable.querySelectorAll('td').forEach(cell => {
        cell.onclick = null;
        cell.style.cursor = 'default';
        cell.tabIndex = -1;
      });
      buyChanceButton.disabled = true;
      giveUpButton.disabled = true;
      buyChanceButton.tabIndex = -1;
      giveUpButton.tabIndex = -1;
    }

    function createProbabilityTable() {
      outcomes.forEach(outcome => {
        const row = document.createElement("tr");
        const resultCell = document.createElement("td");
        resultCell.textContent = outcome.result;
        const probabilityCell = document.createElement("td");
        probabilityCell.textContent = (outcome.probability * 100) + "%";
        row.appendChild(resultCell);
        row.appendChild(probabilityCell);
        probabilityTableBody.appendChild(row);
      });
    }

    function createTable() {
      const table = document.getElementById("gameTable");
      for (let i = 0; i < 10; i++) {
        const row = document.createElement("tr");
        const rowCells = [];
        for (let j = 0; j < 10; j++) {
          const cell = document.createElement("td");
          cell.setAttribute("role", "gridcell");
          cell.setAttribute("aria-label", "ê²Œì„ ì¹¸");
          cell.tabIndex = 0;
          rowCells.push(cell);
          cell.addEventListener("click", function() {
            if (!gameActive) return;
            if (chances > 0) {
              chances--;
              updateInfoBar();
              const outcome = getRandomOutcome();
              this.dataset.result = outcome.result;
              this.dataset.amount = outcome.amount;
              const result = this.dataset.result;
              const amount = parseInt(this.dataset.amount, 10);
              this.textContent = result;
              this.classList.add(getResultClass(result));
              this.classList.add('clicked');
              clickSound.play();
              setTimeout(() => {
                this.classList.remove('clicked');
              }, 150);
              balance += amount;
              updateInfoBar();
              const expGain = Math.max(0, amount);
              experience += expGain;
              updateLevelInfo();
              if (experience >= experiencePerLevel) {
                level++;
                experience -= experiencePerLevel;
                updateLevelInfo();
                alert(`ğŸ‰ ë ˆë²¨ì—…! ë ˆë²¨ ${level} ë‹¬ì„±! ğŸ‰`);
              }
              if (balance <= -10000) {
                alert("íŒŒì‚°! ê²Œì„ ì˜¤ë²„!");
                disableGame();
                return;
              }
              if (chances === 0) {
                const confirmBuy = confirm("ê¸°íšŒë¥¼ ëª¨ë‘ ì†Œì§„í–ˆìŠµë‹ˆë‹¤. ê¸°íšŒë¥¼ ì¶”ê°€ êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ? \n\n (ì·¨ì†Œ: í¬ê¸°í•˜ê¸°)");
                if (confirmBuy) {
                  buyChanceButton.click();
                } else {
                  alert("í¬ê¸°! ê²Œì„ ì˜¤ë²„!");
                  disableGame();
                }
              }
            } else {
              alert("ê¸°íšŒê°€ ì—†ìŠµë‹ˆë‹¤. ê¸°íšŒë¥¼ êµ¬ë§¤í•´ì£¼ì„¸ìš”.");
            }
          });
          row.appendChild(cell);
        }
        table.appendChild(row);
        tableCells.push(rowCells);
      }
    }

    function getResultClass(result) {
      switch (result) {
        case "ê½": return "ê½";
        case "-500ì›": return "minus-500";
        case "-1000ì›": return "minus-1000";
        case "-5000ì›": return "minus-5000";
        case "500ì›": return "plus-500";
        case "1000ì›": return "plus-1000";
        case "5000ì›": return "plus-5000";
        case "10000ì›": return "plus-10000";
        default: return "";
      }
    }

    buyChanceButton.addEventListener("click", function() {
      if (!gameActive) return;
      if (balance >= 500) {
        balance -= 500;
        chances += 1;
        updateInfoBar();
      } else {
        alert("ìê¸ˆì´ ë¶€ì¡±í•©ë‹ˆë‹¤.");
      }
    });

    giveUpButton.addEventListener("click", function() {
      if (!gameActive) return;
      if (confirm("ì •ë§ë¡œ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        alert("í¬ê¸°! ê²Œì„ ì˜¤ë²„!");
        disableGame();
      }
    });

    // í‚¤ë³´ë“œ ì ‘ê·¼ì„±: í…Œì´ë¸” ì…€ ì´ë™ ë° ì„ íƒ
    document.addEventListener('keydown', function(event) {
      if (!gameActive) return;
      const focusedElement = document.activeElement;
      if (focusedElement.tagName === 'TD' && focusedElement.closest('#gameTable')) {
        const currentRowIndex = focusedElement.parentNode.rowIndex;
        const currentCellIndex = focusedElement.cellIndex;
        let nextCell = null;
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          focusedElement.click();
        } else if (event.key === 'ArrowUp') {
          event.preventDefault();
          const nextRowIndex = Math.max(0, currentRowIndex - 1);
          nextCell = tableCells[nextRowIndex][currentCellIndex];
        } else if (event.key === 'ArrowDown') {
          event.preventDefault();
          const nextRowIndex = Math.min(9, currentRowIndex + 1);
          nextCell = tableCells[nextRowIndex][currentCellIndex];
        } else if (event.key === 'ArrowLeft') {
          event.preventDefault();
          const nextCellIndex = Math.max(0, currentCellIndex - 1);
          nextCell = tableCells[currentRowIndex][nextCellIndex];
        } else if (event.key === 'ArrowRight') {
          event.preventDefault();
          const nextCellIndex = Math.min(9, currentCellIndex + 1);
          nextCell = tableCells[currentRowIndex][nextCellIndex];
        }
        if (nextCell) {
          nextCell.focus();
        }
      }
    });

    // ì´ˆê¸°í™”: íŠœí† ë¦¬ì–¼, ì •ë³´ ì—…ë°ì´íŠ¸, í…Œì´ë¸” ìƒì„±
    showTutorial();
    updateInfoBar();
    updateLevelInfo();
    createProbabilityTable();
    createTable();
    document.getElementById('tutorial-close-btn').addEventListener('click', hideTutorial);
  </script>
</body>
</html>
